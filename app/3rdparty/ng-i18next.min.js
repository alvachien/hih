/*! ng-i18next - 0.5.1 - 2015-07-01 - Copyright (c) 2015 Andre Meyering; Licensed MIT*/angular.module("jm.i18next",["ng","ngSanitize"]),angular.module("jm.i18next").provider("$i18next",function(){"use strict";var n=this,t=null,e={},i={},o=0;n.options=i,n.$get=["$rootScope","$timeout","$q",function(r,a,u){function l(n){n.noConflict&&window.i18n&&window.i18n.noConflict();var i=window.i18next||window.i18n;if(i)return d=u.defer(),i.init(n,function(n,o){e={},"undefined"==typeof o?(o=n,n=void 0):n&&"undefined"!=typeof n&&null!==n&&console.log("[ng-i18next] i18next error: "+n),t=o,r.$$phase||r.$digest(),r.$broadcast("i18nextLanguageChange",i.lng()),d.resolve()}),d.promise;if(o++,!(5>o))throw new Error("[ng-i18next] Can't find i18next!");a(function(){return l(n)},400)}function s(n,e){return t=null,f.debugMsg.push(["i18next options changed:",e,n]),i=n,l(i)}function c(n,o,r){var a=o.lng||"auto";e[a]||(e[a]={}),t?(!e[a][n]||r)&&(e[a][n]=t(n,o)):e[a][n]="defaultLoadingValue"in o?o.defaultLoadingValue:"defaultValue"in o?o.defaultValue:"defaultLoadingValue"in i?i.defaultLoadingValue:n}function f(n,t){var o,r,a=!!t,u=a&&t.ns,l=i&&i.ns,s=i;return!u&&l&&(s=angular.copy(i),s.ns=s.ns.defaultNs),o=a?angular.extend({},s,t):s,r=o.lng,c(n,o,a),r?e[r][n]:e.auto[n]}var d;return f.debugMsg=[],f.options=n.options,n.options!==i&&s(n.options,i),f.reInit=function(){return s(i,i)},r.$watch(function(){return f.options},function(n,t){!n||t===n&&i===n||s(n,t)},!0),f}]}),angular.module("jm.i18next").filter("i18next",["$i18next",function(n){"use strict";function t(t,e){return n(t,e)}return t.$stateful=!0,t}]),angular.module("jm.i18next").directive("ngI18next",["$i18next","$compile","$parse","$interpolate","$sanitize",function(n,t,e,i,o){"use strict";function r(n){var t={attr:"text"};n=n.split(":");for(var e=0;e<n.length;++e)"i18next"===n[e]?t[n[e]]=!0:t.attr=n[e];return t}function a(n){var t,i={attr:"text"},o="{}";return n=n.trim(),0===n.indexOf("[")&&(t=n.split("]"),i=r(t.shift().substr(1).trim()),n=t.join("]")),i.i18next&&0===n.indexOf("(")&&n.indexOf(")")>=0&&(t=n.split(")"),n=t.pop().trim(),o=t.join(")").substr(1).trim()),{key:n,options:i,i18nOptions:e(o)}}function u(e,r){function u(u,c){function f(a){a.sprintf&&(a.postProcess="sprintf"),"html"===d.options.attr&&angular.forEach(a,function(n,t){a[t]=o(n)});var u=n(d.key,a);if("html"===d.options.attr)return r.empty().append(u),t(r.contents())(e),void 0;s&&s();var l=r.text.bind(r);"text"!==d.options.attr&&(l=r.attr.bind(r,d.options.attr)),u=i(u),c||(s=e.$watch(u,l)),l(u(e))}var d=a(u);l&&l(),s&&s(),c||(l=e.$watch(d.i18nOptions,f,!0)),f(d.i18nOptions(e))}var l,s;this.localize=function(n,t){for(var e=n.split(";"),i=0;i<e.length;++i)n=e[i].trim(),""!==n&&u(n,t)}}return{restrict:"A",scope:!1,controller:["$scope","$element",u],require:"ngI18next",link:function(n,t,e,o){function r(n){return u=n.replace(/^\s+|\s+$/g,""),""===u?a():(o.localize(u),void 0)}function a(){if(!a.done){var e=i(t.html());n.$watch(e,r),a.done=!0}}var u="";u=e.ngI18next.replace(/^\s+|\s+$/g,""),u.indexOf("__once__")<0?e.$observe("ngI18next",r):(u=u.split("__once__").join(""),o.localize(u,!0)),n.$on("i18nextLanguageChange",function(){o.localize(u)})}}}]),angular.module("jm.i18next").directive("boI18next",["$i18next","$compile",function(n,t){"use strict";return{restrict:"A",scope:!1,link:function(n,e,i){var o=e.clone();o.attr("ng-i18next","__once__"+i.boI18next),o.removeAttr("bo-i18next"),e.replaceWith(t(o)(n))}}}]);
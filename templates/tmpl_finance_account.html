
	<!-- Content area of Finance Account Page begins -->
	<h2 style="clear: both;" data-i18n="Finance.Accounts">Finance Accounts</h2>

	<div>
		<p data-i18n="Finance.AccountsDesp">Accounts: All finance accounts.</p>
	</div>
	

	<!-- Datagrid -->
	<table id="dg" class="easyui-datagrid" title="Finance Accounts"
			style="width: 98%; height: 600px;"
			data-options="singleSelect:true,
					url:'finance_account.php?TYPE=10', method:'get', 
					rownumbers: true,
					showFooter: true,
					noheader: true"
			toolbar="#toolbar">
		<thead>
			<tr>
			<th data-options="field:'id', align:'right'" width="5%"><span data-i18n="Common.ID">ID</span></th>
			<th data-options="field:'ctgyid'" width="5%"><span data-i18n="Common.CategoryID">Category ID</span></th>
			<th data-options="field:'name', align:'center'" width="30%"><span data-i18n="Common.Name">Name</span></th>
			<th data-options="field:'ctgyname',align:'center'" width="15%"><span data-i18n="Common.Category">Category Name</span></th>
			<th data-options="field:'assetflag', align:'center', formatter:formatAssetFlag" width="10%"><span data-i18n="Finance.Asset">Asset</span></th>
			<th data-options="field:'comment', align:'center'" width="15%"><span data-i18n="Common.Comment">Comment</span></th>
			</tr>
		</thead>
	</table>

	<!-- Toolbar of Datagrid -->
	<div id="toolbar">
		<a href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-add" plain="true" onclick="newItem()"> <span data-i18n="Common.New">New</span> 
		</a> <a href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-edit" plain="true" onclick="changeItem()"> <span data-i18n="Common.Change">Change</span>
		</a> <a href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-remove" plain="true" onclick="destroyItem()"> <span data-i18n="Common.Delete">Destroy</span>
		</a> 
	</div>
	
	<!-- Account Create Dialog -->
	<div id="dlgAccountCreate" class="easyui-dialog"
		title="Create an account" style="width: 600px; height: 400px;"
		data-options="resizable:true,modal:true,closed:true">
		<div style="margin: 10px 0;"></div>
		<form id="formCrtAccount" class="easyui-form" method="post">
		<table style="width: 90%">
			<tr>
				<td data-i18n="Common.Category">Category</td>
				<td>
					<div style="margin-bottom: 10px">
					<input class="easyui-combobox" name="ctgy"
							data-options="url:'finance_account_category.php?TYPE=10',
								method: 'get',	
								valueField:'id',
								textField:'name',
								required: true"
							id="cmbctgy" style="width: 100%; height: 30px; padding: 12px"></input>
					</div>
				</td>
			</tr>
			<tr>
				<td data-i18n="Common.Name">Name</td>
				<td>
					<div style="margin-bottom: 20px">
					<input id="tbName" class="easyui-textbox"
							name="name"
							style="width: 100%; height: 30px; padding: 12px"
							data-options="prompt:'Name',required: true, validType: 'length[1, 30]'"></input>
					</div>
				</td>
			</tr>
			<tr>
				<td data-i18n="Common.Comment">Comment</td>
				<td>
					<div style="margin-bottom: 20px">
						<input class="easyui-textbox" name="comment"
							style="width: 100%; height: 30px; padding: 12px"
							data-options="prompt:'Comment'"></input>
					</div>
				</td>
			</tr>
			<tr>
				<td></td>
				<td>
					<div align="right">
						<a href="javascript:void(0)" class="easyui-linkbutton"
							onclick="clearForm()"
							style="padding: 5px 0px; width: 30%;"> <span
							style="font-size: 14px;" data-i18n="Common.Clear">Clear</span>
						</a> <a href="javascript:void(0)" class="easyui-linkbutton"
							data-options="iconCls:'icon-ok'" onclick="submitForm()"
							style="padding: 5px 0px; width: 30%;"> <span
							style="font-size: 14px;" data-i18n="Common.Submit">Submit</span>
						</a> <a href="javascript:void(0)" class="easyui-linkbutton"
							data-options="iconCls:'icon-cancel'" onclick="cancelForm()"
							style="padding: 5px 0px; width: 30%;"> <span
							style="font-size: 14px;" data-i18n="Common.Cancel">Cancel</span>
						</a>
					</div>
				</td>
			</tr>
		</table>
		</form>
	</div>
	
	<!-- Scripts -->
	<script type="text/javascript">
	$('#formCrtAccount').form({
		url : 'script/financeaccount_create.php',
		onSubmit : function() {
			return $(this).form('validate');
		},
		success : function(data) {
			var jsonData;
			try {
				jsonData = JSON && JSON.parse(data) || $.parseJSON(data);
			} catch (e) {
				$.messager.alert('Error', e.description + data, 'Error');
			}
			if (jsonData.type === 'E') {
				$.messager.alert('Error', jsonData.Message, 'error');
			} else {
				var newobject = jsonData.newobject[0];
				// Add it into the list with the new id
				$('#formCrtAccount').form('clear');
				$('#dlgAccountCreate').dialog('close');
				$('#dg').datagrid('appendRow', {
					id : newobject.id,
					ctgyid : newobject.ctgyid,
					name : newobject.name,
					ctgyname : newobject.ctgyname,
					assetflag : newobject.assetflag,
					comment : newobject.comment,
					});
			}
		}
	});
	function formatAssetFlag(val, row){
		return finAssetflag(val);
	}
	function newItem() {
		$("#dlgAccountCreate").dialog('open');
	}
	function changeItem() {
		if (notreadyNvgClick) {
			notreadyNvgClick();
		}
	}
	function destroyItem() {
		var row = $('#dg').datagrid('getSelected');
		if (row) {
			var msgtitle = i18n.t("Common.Confirm");
			var msgtxt = i18n.t("Common.ConfirmToDeleteSelectedItem");
			$.messager.confirm(
				msgtitle,
				msgtxt,
				function(r) {
					if (r) {
						var index = $('#dg').datagrid('getRowIndex', row);
						$.post('script/financeaccount_delete.php', {
							id : row.id
						}, function() {
							$('#dg').datagrid('deleteRow', index);
						});
					}
				});
		}
	}
	function submitForm() {
		$('#formCrtAccount').form('submit');
	}
	function clearForm() {
		$('#formCrtAccount').form('clear');
	}
	function cancelForm() {
		$("#dlgAccountCreate").dialog('close');
	}
	
	// For multiple languages
	function i18npostprocess(lang) {
		// Titles for dialogs
		var titleStr = i18n.t("Finance.CreateAccountTitle");
		$('#dlgAccountCreate').dialog("setTitle", titleStr);
	}
	</script>
	<!-- Content area of Finance Accounts Page ends -->
	